<!DOCTYPE HTML>
<html>

    <head>
        <title>Lifespans</title>
<style>
body {
    margin: 0;
    overflow: hidden;
}
</style>
    </head>

    <body>
        <!--
        <img style="position:absolute; display:none; z-index:99;" id="myImg" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Aristotle_Altemps_Inv8575.jpg/220px-Aristotle_Altemps_Inv8575.jpg" alt="image" height="100" />
        -->

        <canvas id="myCanvas"></canvas>

        <script>
            const canvas = document.getElementById('myCanvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const ctx = canvas.getContext('2d');

            const aristotle = 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Aristotle_Altemps_Inv8575.jpg/220px-Aristotle_Altemps_Inv8575.jpg';
            const plato = 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Plato_Silanion_Musei_Capitolini_MC1377.jpg/220px-Plato_Silanion_Musei_Capitolini_MC1377.jpg';

            const rh = 25;
            let centerYear = 0;
            let xs = 2;

            //const regions = [];

            function drawRect(year, duration, row, color) {
                ctx.beginPath();
                ctx.rect((year - centerYear)*xs + canvas.width/2, row*rh+4, duration*xs, rh-4);
                ctx.fillStyle = color;
                ctx.fill();
                //ctx.lineWidth = 1;
                //ctx.strokeStyle = color;
                //ctx.stroke();
            }

            function textStroked(text, x, y, strokeColor = 'black', fillColor = 'white') {
                ctx.font = "15px Arial";
                ctx.strokeStyle = strokeColor;
                ctx.lineWidth = 2;
                ctx.strokeText(text, x, y);
                ctx.fillStyle = fillColor;
                ctx.fillText(text, x, y);
            }

            function drawCenturies() {
                ctx.beginPath();
                for (let i=-22; i < 22; i++) {
                    const line_x = (100*i - centerYear)*xs + canvas.width/2;
                    //if ((line_x < -canvas.width) || (line_x > 2*canvas.width)) {
                    //    continue;
                    //}
                    ctx.lineWidth = 4;
                    ctx.strokeStyle = '#a0a0a0';
                    ctx.beginPath();
                    ctx.moveTo(line_x, 0);
                    ctx.lineTo(line_x, canvas.height);
                    ctx.stroke();

                    if (xs > 2) {
                        for (let j=0; j < 10; j++) {
                            ctx.lineWidth = 1;
                            ctx.strokeStyle = '#c0c0c0';
                            ctx.beginPath();
                            ctx.moveTo((100*i+10*j - centerYear)*xs + canvas.width/2, 0);
                            ctx.lineTo((100*i+10*j - centerYear)*xs + canvas.width/2, canvas.height);
                            ctx.stroke();

                            ctx.lineWidth = 0.5;
                            ctx.strokeStyle = '#d0d0d0';
                            if (xs > 8) {
                                for (let k=0; k < 10; k++) {
                                    ctx.beginPath();
                                    ctx.moveTo((100*i+10*j+k - centerYear)*xs + canvas.width/2, 0);
                                    ctx.lineTo((100*i+10*j+k - centerYear)*xs + canvas.width/2, canvas.height);
                                    ctx.stroke();
                                }
                            }
                        }
                    }
                }
                ctx.font = "bold 15px Arial";
                ctx.fillStyle = 'black';
                ctx.fillText("18th BC", (-1775 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("17th BC", (-1675 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("16th BC", (-1575 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("15th BC", (-1475 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("14th BC", (-1375 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("13th BC", (-1275 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("12th BC", (-1175 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("11th BC", (-1075 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("10th BC", ( -975 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "9th BC", ( -875 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "8th BC", ( -775 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "7th BC", ( -675 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "6th BC", ( -575 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "5th BC", ( -475 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "4th BC", ( -375 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "3rd BC", ( -275 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "2nd BC", ( -175 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "1st BC", (  -75 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "1st AD", (   25 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "2nd AD", (  125 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "3rd AD", (  225 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "4th AD", (  325 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "5th AD", (  425 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "6th AD", (  525 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "7th AD", (  625 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "8th AD", (  725 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText( "9th AD", (  825 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("10th AD", (  925 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("11th AD", ( 1025 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("12th AD", ( 1125 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("13th AD", ( 1225 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("14th AD", ( 1325 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("15th AD", ( 1425 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("16th AD", ( 1525 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("17th AD", ( 1625 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("18th AD", ( 1725 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("19th AD", ( 1825 - centerYear)*xs + canvas.width/2, 15);
                ctx.fillText("20th AD", ( 1925 - centerYear)*xs + canvas.width/2, 15);
            }

            function lifespan(name, birth, death, row, color, img_url = aristotle) {
                const duration = death - birth + 1;

                //const minX = birth - firstYear;
                //const minY = (row+1)*rh+4;
                //const maxX = minX + duration;
                //const maxY = minY + rh - 1;
                //regions.push([minX, minY, maxX, maxY, img_url]);

                drawRect(birth, duration, row+1, color);
                textStroked(name, (birth - centerYear + 2)*xs + canvas.width/2, rh*(row+1) + rh-4);
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawCenturies();
                lifespan("Jean-Jacques Rousseau",                   1712, 1762, 0, '#00a000');
                lifespan("Thomas Aquinas",                          1225, 1275, 0, '#0000a0');
                lifespan("Mahatma Gandhi",                          1869, 1919, 0, '#a0a000');
                lifespan("Mark Antony",                             -83, -30, 0, '#a000a0');
                lifespan("Xenophon",                                -431, -354, 0, '#00a0a0');
                lifespan("Cyrus",                                   -600, -530, 0, '#a0a0a0');
                lifespan("Mozart",                                  1756, 1806, 1, '#a00000');
                lifespan("Marius",                                  -157, -86, 0, '#00a000');
                lifespan("William Shakespeare",                     1564, 1614, 0, '#0000a0');
                lifespan("Gilgamesh",                               -3500, -3450, 0, '#a0a000');
                lifespan("Vladimir Lenin",                          1870, 1920, 1, '#a000a0');
                lifespan("G. Gracchus",                             -154, -121, 1, '#00a0a0');
                lifespan("Zoroaster",                               -600, -550, 1, '#a0a0a0');
                lifespan("Laozi",                                   -400, -350, 1, '#a00000');
                lifespan("Galileo Galilei",                         1564, 1614, 1, '#00a000');
                lifespan("Caligula",                                12, 62, 0, '#0000a0');
                lifespan("Adolf Hitler",                            1889, 1939, 2, '#a0a000');
                lifespan("Charles Martel",                          686, 741, 0, '#a000a0');
                lifespan("Pythagoras",                              -570, -495, 2, '#00a0a0');
                lifespan("Avicenna",                                980, 1030, 0, '#a0a0a0');
                lifespan("Muhammad",                                570, 620, 0, '#a00000');
                lifespan("Elizabeth I of England",                  1533, 1583, 2, '#00a000');
                lifespan("Moses",                                   -1391, -1341, 0, '#0000a0');
                lifespan("Che Guevara",                             1928, 1978, 0, '#a0a000');
                lifespan("Genghis Khan",                            1162, 1212, 0, '#a000a0');
                lifespan("Adam Smith",                              1723, 1773, 2, '#00a0a0');
                lifespan("Horace",                                  -65, -15, 1, '#a0a0a0');
                lifespan("Nefertiti",                               -1370, -1320, 1, '#a00000');
                lifespan("Ramesses II",                             -1303, -1253, 0, '#00a000');
                lifespan("Augustine of Hippo",                      354, 404, 0, '#0000a0');
                lifespan("Euclid",                                  -435, -365, 2, '#a0a000');
                lifespan("Trajan",                                  53, 103, 1, '#a000a0');
                lifespan("Johann Sebastian Bach",                   1685, 1735, 1, '#00a0a0');
                lifespan("Attila the Hun",                          406, 456, 0, '#a0a0a0');
                lifespan("Anne Boleyn",                             1501, 1551, 0, '#a00000');
                lifespan("Raphael",                                 1483, 1533, 1, '#00a000');
                lifespan("Albert Einstein",                         1879, 1929, 3, '#0000a0');
                lifespan("Vasco da Gama",                           1469, 1519, 2, '#a0a000');
                lifespan("Aesop",                                   -620, -570, 3, '#a000a0');
                lifespan("Alaric",                                  370, 410, 1, '#00a0a0');
                lifespan("Joseph Stalin",                           1878, 1928, 4, '#a0a0a0');
                lifespan("Sophocles",                               -496, -446, 0, '#a00000');
                lifespan("Isaac Newton",                            1642, 1692, 0, '#00a000');
                lifespan("Saladin",                                 1138, 1188, 1, '#0000a0');
                lifespan("Leonidas I",                              -540, -490, 1, '#a0a000');
                lifespan("Akhenaten",                               -1380, -1330, 2, '#a000a0');
                lifespan("Jeanne d'Arc",                            1412, 1462, 0, '#00a0a0');
                lifespan("Socrates",                                -469, -399, 3, '#a0a0a0');
                lifespan("Aristotle",                               -384, -322, 3, '#a00000');
                lifespan("Plato",                                   -427, -348, 4, '#00a000');
                lifespan("John the Baptist",                        -5, 45, 1, '#0000a0');
                lifespan("Mary Magdalene",                          1, 51, 2, '#a0a000');
                lifespan("Ludwig van Beethoven",                    1770, 1820, 0, '#a000a0');
                lifespan("Qin Shi Huang",                           -259, -209, 0, '#00a0a0');
                lifespan("Marcus Aurelius",                         121, 171, 0, '#a0a0a0');
                lifespan("Solomon",                                 -1000, -950, 0, '#a00000');
                lifespan("Johannes Gutenberg",                      1398, 1448, 1, '#00a000');
                lifespan("Themistocles",                             -524, -459, 4, '#0000a0');
                lifespan("Homer*",                                  -800, -740, 0, '#a0a000');
                lifespan("Darius I",                                -550, -486, 3, '#a000a0');
                lifespan("Hannibal",                                -247, -181, 1, '#00a0a0');
                lifespan("Clovis I",                                466, 511, 0, '#a0a0a0');
                lifespan("Vincent van Gogh",                        1853, 1903, 5, '#a00000');
                lifespan("Saint Peter",                             0, 50, 3, '#00a000');
                lifespan("Blaise Pascal",                           1623, 1673, 1, '#0000a0');
                lifespan("Caesar",                                  -100, -44, 2, '#a0a000');
                lifespan("Jesus Christ",                            -4, 33, 4, '#a000a0');
                lifespan("Thucydides",                              -460, -400, 5, '#00a0a0');
                lifespan("Tutankhamun",                             -1341, -1291, 3, '#a0a0a0');
                lifespan("Epicurus",                                -341, -291, 0, '#a00000');
                lifespan("T. Gracchus",                             -169, -133, 2, '#00a000');
                lifespan("Otto I",                                  912, 973, 0, '#0000a0');
                lifespan("Ptolemy",                                 90, 140, 2, '#a0a000');
                lifespan("Augustus",                                -63, -14, 3, '#a000a0');
                lifespan("Nero",                                    37, 87, 4, '#00a0a0');
                lifespan("Cicero",                                  -106, -43, 4, '#a0a0a0');
                lifespan("Paul of Tarsus",                          5, 55, 5, '#a00000');
                lifespan("Sappho",                                  -625, -575, 2, '#00a000');
                lifespan("Herodotus",                               -484, -425, 1, '#0000a0');
                lifespan("Christopher Columbus",                    1451, 1501, 3, '#a0a000');
                lifespan("Louis XIV of France",                     1638, 1688, 2, '#a000a0');
                lifespan("Mary",                                    -18, 32, 6, '#00a0a0');
                lifespan("Sigmund Freud",                           1856, 1906, 6, '#a0a0a0');
                lifespan("Leonidas",                                -540, -480, 5, '#a00000');
                lifespan("Niccolò Machiavelli",                    1469, 1519, 4, '#00a000');
                lifespan("Dante Alighieri",                         1265, 1315, 1, '#0000a0');
                lifespan("Sulla",                                   -138, -78, 3, '#a0a000');
                lifespan("Charles Darwin",                          1809, 1859, 1, '#a000a0');
                lifespan("Voltaire",                                1694, 1744, 3, '#00a0a0');
                lifespan("Napoleon Bonaparte",                      1769, 1819, 3, '#a0a0a0');
                lifespan("Abraham",                                 -1800, -1750, 0, '#a00000');
                lifespan("Johann Wolfgang von Goethe",              1749, 1799, 4, '#00a000');
                lifespan("Heraclitus",                              -535, -485, 6, '#0000a0');
                lifespan("Hippocrates",                             -460, -410, 6, '#a0a000');
                lifespan("Pablo Picasso",                           1881, 1931, 7, '#a000a0');
                lifespan("Archimedes",                              -287, -212, 2, '#00a0a0');
                lifespan("Karl Marx",                               1818, 1868, 2, '#a0a0a0');
                lifespan("Marco Polo",                              1254, 1304, 2, '#a00000');
                lifespan("David",                                   -1040, -990, 1, '#00a000');
                lifespan("Charlemagne",                             742, 814, 0, '#0000a0');
                lifespan("Immanuel Kant",                           1724, 1774, 5, '#a0a000');
                lifespan("Aeschylus",                               -525, -475, 7, '#a000a0');
                lifespan("Cleopatra",                               -69, -30, 5, '#00a0a0');
                lifespan("Xerxes I",                                -519, -466, 8, '#a0a0a0');
                lifespan("Pericles",                                -495, -429, 9, '#a00000');
                lifespan("Saint Jerome",                            347, 420, 2, '#00a000');
                lifespan("René Descartes",                         1596, 1646, 3, '#0000a0');
                lifespan("Michelangelo",                            1475, 1525, 5, '#a0a000');
                lifespan("Thales",                                  -624, -546, 4, '#a000a0');
                lifespan("Gautama Buddha",                          -563, -513, 9, '#00a0a0');
                lifespan("Ferdinand Magellan",                      1480, 1530, 6, '#a0a0a0');
                lifespan("Martin Luther",                           1483, 1533, 7, '#a00000');
                lifespan("Leonardo da Vinci",                       1452, 1502, 8, '#00a000');
                lifespan("Confucius",                               -551, -501, 10, '#0000a0');
                lifespan("Ovid",                                    -43, 7, 7, '#a0a000');
                lifespan("Alexander",                               -356, -323, 2, '#a000a0');
            }

            draw();

            function resize(e) {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                draw();
            }

            let at_start_of_animation = true;
            let animation_start_time = 0;
            let centerYear_at_start;
            let centerYear_at_end;
            let wheelDelta;
            const DUR = 100;
            function advanceTime(t) {
                const dir = wheelDelta > 0 ? 1 : -1;
                if (at_start_of_animation) {
                    at_start_of_animation = false;
                    animation_start_time = t;
                    centerYear_at_start = centerYear;
                    centerYear_at_end = centerYear + dir*200/xs;
                }
                const tx = t - animation_start_time;
                if (tx > DUR) {
                    centerYear = centerYear_at_end;
                    draw();
                    at_start_of_animation = true;
                    return;
                }

                centerYear = centerYear_at_start + dir*tx*200/(DUR*xs);

                draw();
                requestAnimationFrame(advanceTime);
            }

            let xs_at_start;
            let xs_at_end;
            function zoom(t) {
                const dir = wheelDelta > 0 ? 1 : -1;
                if (at_start_of_animation) {
                    at_start_of_animation = false;
                    animation_start_time = t;
                    xs_at_start = xs;
                    if (dir > 0) {
                        xs_at_end = xs*1.3;
                    } else {
                        xs_at_end = xs/1.3;
                    }
                }
                const tx = t - animation_start_time;
                if (tx > DUR) {
                    xs = xs_at_end;
                    draw();
                    at_start_of_animation = true;
                    return;
                }

                if (dir > 0) {
                    xs = xs_at_start*(1 + 0.3*tx/DUR);
                } else {
                    xs = xs_at_start/(1 + 0.3*tx/DUR);
                }

                draw();
                requestAnimationFrame(zoom);
            }

            function wheel(e) {
                if (at_start_of_animation) {
                    wheelDelta = e.wheelDelta;
                    requestAnimationFrame(zoom);
                }
            }

            function keydown(e) {
                if (at_start_of_animation) {
                    if (e.key == 'ArrowLeft') {
                        wheelDelta = -1;
                        requestAnimationFrame(advanceTime);
                    } else if (e.key == 'ArrowRight') {
                        wheelDelta = 1;
                        requestAnimationFrame(advanceTime);
                    } else if (e.key == 'ArrowUp') {
                        wheelDelta = -1;
                        requestAnimationFrame(zoom);
                    } else if (e.key == 'ArrowDown') {
                        wheelDelta = 1;
                        requestAnimationFrame(zoom);
                    }
                }
            }

      		window.addEventListener('resize', resize, false);
      		window.addEventListener('wheel', wheel, false);
      		window.addEventListener('keydown', keydown, false);


//      		function writeMessage(canvas, message, x, y) {
//
//                const mySpan = document.getElementById('myImg');
//
//                const i;
//                const found = false;
//                const img_url;
//                for(i=0; i < regions.length; i++) {
//                    const minX = regions[i][0];
//                    const minY = regions[i][1];
//                    const maxX = regions[i][2];
//                    const maxY = regions[i][3];
//                    if((x > minX) && (y > minY) && (x < maxX) && (y < maxY)) {
//                        found = true;
//                        img_url = regions[i][4];
//                        break;
//                    }
//                }
//                if(found) {
//                    mySpan.style.display = "block";
//                    mySpan.style.top = y + "px";
//                    mySpan.style.left = x + "px";
//                    mySpan.src = img_url;
//                }
//                else      {
//                    mySpan.style.display = "none";
//                }
//
//      		}
//      		function getMousePos(canvas, evt) {
//      		    const rect = canvas.getBoundingClientRect();
//      		    return {
//      		      x: evt.clientX - rect.left,
//      		      y: evt.clientY - rect.top
//      		    };
//      		}
//
//      		canvas.addEventListener('mousemove', function(evt) {
//      			const mousePos = getMousePos(canvas, evt);
//      			const message = mousePos.x + ',' + mousePos.y;
//      			writeMessage(canvas, message, mousePos.x, mousePos.y);
//      		}, false);
        </script>
    </body>

</html>
